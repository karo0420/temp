(function(e){function t(t){for(var r,u,a=t[0],i=t[1],s=t[2],d=0,f=[];d<a.length;d++)u=a[d],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&f.push(o[u][0]),o[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function u(e){return a.p+"js/"+({}[e]||e)+"."+{"chunk-04e3eea8":"b9a7ea83","chunk-2c5eabd7":"a7aa52eb","chunk-2d0b6adc":"88aa8621","chunk-2d0c7cfe":"2bb2d2b4","chunk-2d0c7e58":"d9df8261","chunk-2d0d3c36":"b90f2693","chunk-2d0db0c6":"93d7f7bd","chunk-2d0ddda4":"fc88efce","chunk-2d0e5060":"298e018a","chunk-2d217544":"13896e1c","chunk-2d21d82a":"5f4a85a4","chunk-310dcdb9":"79f2001f","chunk-59a7c63d":"7a5d8ed0","chunk-70274c38":"a0ddf5c4"}[e]+".js"}function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=u(e);var s=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",s.name="ChunkLoadError",s.type=r,s.request=c,n[1](s)}o[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08ae":function(e,t,n){"use strict";function r(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?"Bearer "+e.token:{}}function o(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.id?e.id:null}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},"152b":function(e,t,n){"use strict";n("36a9")},"2ade":function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),o=["onClick"],c=Object(r["h"])(" , "),u={key:0,class:"text-danger"},a=Object(r["h"])(" , "),i=Object(r["g"])("br",null,null,-1),s=["src"],d={class:"text-secondary"};function l(e,t,n,l,f,h){return Object(r["s"])(),Object(r["f"])("div",null,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["w"])(n.events,(function(e){return Object(r["s"])(),Object(r["f"])("div",{key:e.id,onClick:function(t){return h.showEvent(e.id)}},[Object(r["h"])(Object(r["z"])(e.id)+". ",1),Object(r["g"])("strong",null,Object(r["z"])(n.loggedInUserId==e.owner_id?"":"Invited"),1),c,e.expired?(Object(r["s"])(),Object(r["f"])("strong",u,"Expired")):Object(r["e"])("",!0),a,Object(r["g"])("span",null,Object(r["z"])(e.title),1),Object(r["h"])(" , "+Object(r["z"])(e.due_date_string)+" , ",1),Object(r["g"])("strong",null,Object(r["z"])(f.privateStatus[e.private]),1),i,Object(r["g"])("ul",null,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["w"])(e.guests,(function(e){return Object(r["s"])(),Object(r["f"])("li",{key:e.id},[Object(r["g"])("img",{src:e.profile.photo,width:"25"},null,8,s),Object(r["h"])(" "+Object(r["z"])(e.profile.name)+" , ",1),Object(r["g"])("span",d,Object(r["z"])(e.status),1)])})),128))])],8,o)})),128))])}n("a9e3");var f={name:"EventList",data:function(){return{privateStatus:{1:"Public",2:"Private to followers",3:"private to invites"}}},props:{events:{type:Array},loggedInUserId:{type:Number,required:!1,default:null}},methods:{showEvent:function(e){this.$router.push({name:"showEvent",params:{id:e}})}}};f.render=l;t["a"]=f},"30c1":function(e,t,n){"use strict";var r=n("d4ec"),o=n("bee2"),c=(n("d3b7"),n("a4d3"),n("e01a"),n("6c8e")),u=function(){function e(){Object(r["a"])(this,e)}return Object(o["a"])(e,[{key:"prepare",value:function(){return c["a"].get("/events").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"getById",value:function(e){return c["a"].get("/events/"+e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"createPrepare",value:function(){return c["a"].get("/events/create")}},{key:"create",value:function(e){return c["a"].post("/events",{title:e.title,description:e.description,due_date:e.dueDate,private:e.isPrivate?2:1,category_id:e.category}).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"addGuest",value:function(e,t){return c["a"].post("/events/"+e+"/guests",{guests:t}).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},{key:"getGuests",value:function(e){return c["a"].get("/events/"+e+"/guests").then((function(e){return Promise.resolve(e.data.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"removeGuests",value:function(e,t){return"number"==typeof t&&(t=[t]),c["a"].delete("/events/"+e+"/guests",{data:{guests:t}})}},{key:"invititionGuestResponse",value:function(e,t){return c["a"].patch("/invitations",{event:e,accept:t})}},{key:"getGallery",value:function(e){return c["a"].get("/events/"+e+"/gallery").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"addPhotoToGallery",value:function(e,t){return c["a"].post("/events/"+e+"/gallery",t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"removePhotoFromGallery",value:function(e,t){return c["a"].delete("/events/"+e+"/gallery/"+t).then((function(e){return Promise.resolve(e.data.data)})).catch((function(e){return Promise.reject(e)}))}}]),e}();t["a"]=new u},"36a9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={id:"nav"};function c(e,t,n,c,u,a){var i=Object(r["x"])("Nav"),s=Object(r["x"])("router-view");return Object(r["s"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("div",o,[Object(r["i"])(i),Object(r["h"])(" "+Object(r["z"])(a.updateSocket),1)]),Object(r["i"])(s)],64)}var u=n("5530"),a=(n("d3b7"),n("ddb0"),n("159b"),{key:0}),i=Object(r["h"])(" Welcome "),s=Object(r["g"])("br",null,null,-1),d=Object(r["h"])(" | "),l=Object(r["h"])("Explore"),f=Object(r["h"])(" | "),h={key:1},p=Object(r["h"])("Home"),b=Object(r["h"])(" | "),v=Object(r["h"])("Profile"),m=Object(r["h"])(" | "),g=Object(r["h"])("Create event"),j=Object(r["h"])(" | "),O={key:2},k=Object(r["h"])("Register"),y=Object(r["h"])(" | "),P=Object(r["h"])("Login");function w(e,t,n,o,c,u){var w=Object(r["x"])("router-link");return Object(r["s"])(),Object(r["f"])("div",null,[e.loggedIn&&e.user.profile.username?(Object(r["s"])(),Object(r["f"])("span",a,[i,Object(r["g"])("strong",null,Object(r["z"])(e.user.profile.username),1),s,Object(r["i"])(w,{to:{name:"Notifications"}},{default:Object(r["G"])((function(){return[Object(r["h"])("Notification ("+Object(r["z"])(e.count)+") ",1)]})),_:1}),d])):Object(r["e"])("",!0),Object(r["i"])(w,{to:{name:"TodayBirthdays"}},{default:Object(r["G"])((function(){return[l]})),_:1}),f,e.loggedIn?(Object(r["s"])(),Object(r["f"])("span",h,[Object(r["i"])(w,{to:"/"},{default:Object(r["G"])((function(){return[p]})),_:1}),b,Object(r["i"])(w,{to:{name:"ProfileDetail",params:{id:e.user.id}}},{default:Object(r["G"])((function(){return[v]})),_:1},8,["to"]),m,Object(r["i"])(w,{to:{name:"createEvent"}},{default:Object(r["G"])((function(){return[g]})),_:1}),j,Object(r["g"])("span",{onClick:t[0]||(t[0]=function(e){return u.logout()})},"Logout")])):Object(r["e"])("",!0),e.loggedIn?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["f"])("span",O,[Object(r["i"])(w,{to:"/users/register"},{default:Object(r["G"])((function(){return[k]})),_:1}),y,Object(r["i"])(w,{to:"/users/login"},{default:Object(r["G"])((function(){return[P]})),_:1})]))])}var E=n("5502"),S={name:"Nav",data:function(){return{userId:1}},computed:Object(u["a"])(Object(u["a"])({},Object(E["c"])("auth",["loggedIn","user"])),Object(E["c"])("notification",["count"])),created:function(){},methods:{logout:function(){this.$store.dispatch("auth/logout"),this.$router.push({name:"Login"})}}};n("8239");S.render=w;var I=S,_=n("782e"),C=n.n(_),N=n("08ae"),G=n("2ef0"),U=n.n(G),x={components:{Nav:I},data:function(){return{pusher:""}},mounted:function(){this.$store.dispatch("event/prepare"),this.$store.dispatch("notification/prepare")},created:function(){this.pusher=new C.a("f7db6fa277e53252a471",{cluster:"eu",authEndpoint:"http://api.karo.uk/api/broadcasting/auth",auth:{headers:{Accept:"application/json",Authorization:Object(N["a"])()}}}),Object(N["b"])()&&this.pusher.subscribe("private-User."+Object(N["b"])())},computed:Object(u["a"])(Object(u["a"])({},Object(E["c"])("event",["events"])),{},{updateSocket:function(){var e=this;return U.a.keys(this.events.home.data).length>0&&this.events.home.data.forEach((function(t){e.pusher.subscribe("private-"+(t.owner_id==Object(N["b"])()?"Event.Owner.":"Event.")+t.id)})),""}})};n("152b");x.render=c;var T=x,R=n("9483");Object(R["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("3ca3"),n("99af"),n("caad"),n("2532");var A=n("6c02"),z={class:"home"};function L(e,t,n,o,c,u){var a=Object(r["x"])("event-list");return Object(r["s"])(),Object(r["f"])("div",z,[Object(r["i"])(a,{events:e.events.home.data,loggedInUserId:e.user.id},null,8,["events","loggedInUserId"])])}var V=n("2ade"),J={name:"Home",components:{EventList:V["a"]},computed:Object(u["a"])(Object(u["a"])({},Object(E["c"])("event",["events"])),Object(E["c"])("auth",["user"])),methods:{}};J.render=L;var B=J,D=[{path:"/",name:"Home",component:B},{path:"/users/register",name:"Register",component:function(){return n.e("chunk-2d0e5060").then(n.bind(null,"935e"))}},{path:"/users/login",name:"Login",component:function(){return n.e("chunk-2d0c7e58").then(n.bind(null,"5326"))}},{path:"/users/confirm",name:"Confirm",component:function(){return n.e("chunk-2d0d3c36").then(n.bind(null,"5dc4"))},props:!0},{path:"/profiles/:id",name:"ProfileDetail",component:function(){return n.e("chunk-2d0ddda4").then(n.bind(null,"82c7"))},props:!0},{path:"/profiles/create",name:"CreateProfile",component:function(){return n.e("chunk-2d217544").then(n.bind(null,"c5ea"))}},{path:"/explore",name:"Explore",component:function(){return n.e("chunk-2d21d82a").then(n.bind(null,"d239"))},children:[{path:"today",name:"TodayBirthdays",component:function(){return n.e("chunk-310dcdb9").then(n.bind(null,"928f"))}}]},{path:"/events",name:"Event",component:function(){return n.e("chunk-2d0c7cfe").then(n.bind(null,"51e1"))}},{path:"/events/create",name:"createEvent",component:function(){return n.e("chunk-2d0b6adc").then(n.bind(null,"1dd7"))}},{path:"/events/:id",name:"showEvent",component:function(){return n.e("chunk-59a7c63d").then(n.bind(null,"adaf"))},props:!0,children:[{path:"guests/add",name:"addGuest",component:function(){return n.e("chunk-2c5eabd7").then(n.bind(null,"74d8"))},props:!0}]},{path:"/events/:id/guests",name:"viewGuests",component:function(){return n.e("chunk-04e3eea8").then(n.bind(null,"591c"))},props:!0},{path:"/events/:id/gallery",name:"viewGallery",component:function(){return n.e("chunk-70274c38").then(n.bind(null,"3590"))},props:!0},{path:"/notifications",name:"Notifications",component:function(){return n.e("chunk-2d0db0c6").then(n.bind(null,"6dce"))}}],M=Object(A["a"])({history:Object(A["b"])("/"),routes:D});M.beforeEach((function(e,t,n){var r=["/users/register","/users/login","/users/confirm","/users/resend","/explore/today","/notifications"],o=[].concat(r,["/profiles/create"]),c=!r.includes(e.path),u=JSON.parse(localStorage.getItem("user")),a=!o.includes(e.path);c?u?a&&null==u.profile.username?n("/profiles/create"):n():n("/users/login"):n()}));var F=M,$=(n("b0c0"),n("9962")),q=n("794b"),H=JSON.parse(localStorage.getItem("user")),W=H?{loggedIn:!0,user:H}:{loggedIn:!1,user:null},K={namespaced:!0,state:W,actions:{confirm:function(e,t){var n=e.commit;return $["a"].confirm(t.phone,t.confirmCode).then((function(e){return n("CONFIRM_SUCCESS",e),Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},logout:function(e){var t=e.commit;$["a"].logout(),t("LOGOUT_SUCCESS")},updateUser:function(e,t){var n=e.commit;return q["a"].create(t.username,t.dob,t.name,t.hide_dob).then((function(e){return n("UPDATE_USER",e),Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},mutations:{CONFIRM_SUCCESS:function(e,t){e.loggedIn=!0,e.user=t},LOGOUT_SUCCESS:function(e){e.loggedIn=!1,e.user=null},UPDATE_USER:function(e,t){console.log(t),e.user=t}}},Q=(n("c740"),n("7db0"),n("30c1")),X={notifications:{publics:0,inviteds:0,friends:0},events:{home:[],active:[],expired:[],viewed:[],currentView:null}},Y={namespaced:!0,state:X,actions:{prepare:function(e){var t=e.commit;Q["a"].prepare().then((function(e){t("PREPARE_SUCCESS",e)}))},getById:function(e,t){var n=e.commit,r=e.getters,o=r.getViewed(t);return void 0!==o?Promise.resolve(o):Q["a"].getById(t).then((function(e){return n("SET_VIEWED_EVENT",e),Promise.resolve(e)}))},addGuest:function(e,t){var n=e.commit;return Q["a"].addGuest(t.eventId,t.guestIds).then((function(e){if(201==e.status)return n("SET_EVENT_GUESTS",{eventId:parseInt(t.eventId),guests:e.data.data.guests}),Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},mutations:{PREPARE_SUCCESS:function(e,t){e.events.home=t},SET_VIEWED_EVENT:function(e,t){e.events.viewed.push(t)},SET_EVENT_GUESTS:function(e,t){e.events.viewed[e.events.viewed.findIndex((function(e){return e.data.id===t.eventId}))].guests=t.guests}},getters:{getViewed:function(e){return function(t){return e.events.viewed.find((function(e){return e.data.id==parseInt(t)}))}},getViewedIndex:function(e){return function(t){return e.events.viewed.findIndex((function(e){return e.data.id==parseInt(t)}))}}}},Z=n("d4ec"),ee=n("bee2"),te=n("6c8e"),ne=function(){function e(){Object(Z["a"])(this,e)}return Object(ee["a"])(e,[{key:"getNotifications",value:function(){return te["a"].get("/notification")}}]),e}(),re=new ne,oe={count:0,notifications:[]},ce={namespaced:!0,state:oe,actions:{prepare:function(e){var t=e.commit;re.getNotifications().then((function(e){t("PREPARE_SUCCESS",e.data),console.log(e.data)}))}},mutations:{PREPARE_SUCCESS:function(e,t){e.count=t.length,e.notifications=t}}},ue=Object(E["a"])({modules:{auth:K,event:Y,notification:ce}});n("f9e3");Object(r["c"])(T).use(ue).use(F).mount("#app")},"6c8e":function(e,t,n){"use strict";n("d3b7");var r=n("bc3a"),o=n.n(r),c=n("08ae"),u=o.a.create({baseURL:"http://api.karo.uk/api"});u.interceptors.request.use((function(e){return e.headers.Authorization=Object(c["a"])(),e})),u.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),t["a"]=u},"794b":function(e,t,n){"use strict";var r=n("d4ec"),o=n("bee2"),c=(n("d3b7"),n("6c8e")),u=function(){function e(){Object(r["a"])(this,e)}return Object(o["a"])(e,[{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return c["a"].post("/profiles",{username:e,dob:t,name:n,hide_dob:r}).then((function(e){return localStorage.setItem("user",JSON.stringify(e.data)),Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"get",value:function(e){return c["a"].get("/profiles/"+e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"follow",value:function(e){return c["a"].post("/follows",{follow:e}).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"unfollow",value:function(e){return this.followCancel(e)}},{key:"followCancel",value:function(e){return c["a"].delete("/follows",{data:{follow:e}}).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"followRespond",value:function(e,t){return c["a"].patch("/follows",{follower:e,accept:t}).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}}]),e}();t["a"]=new u},8239:function(e,t,n){"use strict";n("c527")},9962:function(e,t,n){"use strict";var r=n("d4ec"),o=n("bee2"),c=(n("d3b7"),n("6c8e")),u=function(){function e(){Object(r["a"])(this,e)}return Object(o["a"])(e,[{key:"register",value:function(e){return c["a"].post("/users/register",{phone:e})}},{key:"login",value:function(e){return c["a"].post("/users/login",{phone:e})}},{key:"confirm",value:function(e,t){return c["a"].post("/users/confirm",{phone:e,code:t}).then((function(e){return localStorage.setItem("user",JSON.stringify(e.data.data)),Promise.resolve(e.data.data)})).catch((function(e){return Promise.reject(e)}))}},{key:"resend",value:function(e){return c["a"].post("/users/confirm/resend",{phone:e}).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},{key:"logout",value:function(){localStorage.removeItem("user")}}]),e}();t["a"]=new u},c527:function(e,t,n){}});
//# sourceMappingURL=app.79cf9236.js.map